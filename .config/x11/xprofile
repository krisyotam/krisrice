#!/bin/sh

# This file runs when a DM logs you into a graphical session.
# If you use startx/xinit like a Chad, this file will also be sourced.

# --- DPI: bump to 160 by default ---
xrandr --dpi 160    # HiDPI default

# --- Autostart background programs ---
autostart="mpd xcompmgr dunst unclutter pipewire remapd"

for program in $autostart; do
    pidof -sx "$program" >/dev/null 2>&1 || "$program" &
done >/dev/null 2>&1

# --- Run setbg AFTER dwm is up, then restart dwm ---

# 1) Wait a bit for the DM/xinit to actually start dwm, then set the wallpaper
(
    sleep 1
    setbg &
) &

# 2) Then wait slightly longer and force dwm to reload so it re-reads DPI/etc.
(
    sleep 2
    pkill -HUP dwm 2>/dev/null
) &
